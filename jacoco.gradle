
if (Boolean.getBoolean("coverageEnabled")) {
    project.logger.lifecycle('Running Tests With Code Coverage')
    apply plugin: 'jacoco'
    jacoco {
        toolVersion = '0.8.12'
    }
    test {
        finalizedBy jacocoTestReport // report is always generated after tests run
    }
    jacocoTestReport {
    	dependsOn test
        reports {
            xml.required = true
            csv.required = true
            html.outputLocation = layout.buildDirectory.dir('reports/coverage')
        }
    }
}
